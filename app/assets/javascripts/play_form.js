'use strict';

$(document).ready(initialize);

function initialize(){
  if ($('body.plays').length) {
    console.log("Page generated by the plays controller.");
    createFields();
    modifyForm();
    $('#play-form-container').on('click', '#add-player', clickAddPlayer);
  }
}

function clickAddPlayer(){
  var currentList = $('#players').val();
  var newItem = $('#player-name').val();
  $('#players').val(CSVify(currentList, newItem));
  $('#player-name').val("");
}

function createFields(){
  var $label = $('<label>').attr('for', 'player-name').text('Player to add')
  var $textField = $('<input>').attr('id', 'player-name').attr('type', 'text');
  var $button = $('<input>').attr('id', 'add-player').attr('type', 'button')
  $button.val('Add Player').addClass('button tiny');
  $('#new-play-form').before($label).before($textField).before($button)
}

function CSVify(currentList, newItem) {
  var newList;
  if (currentList.length > 0) {
    newList = currentList.split(', ');
    newList.push(newItem);
    newList = newList.join(', ');
  } else {
    newList = newItem;
  }
  return newList
}

function modifyForm() {
  $('#players-label').text('Players');
}